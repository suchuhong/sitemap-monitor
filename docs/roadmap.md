# 功能拓展路线图

本文档列出在现有 Sitemap Monitor 基础上可按阶段逐步迭代的功能项，并说明每一步的目标、关键工作与预期影响，便于团队规划实施。

## 阶段 1：基础体验完善

- **用户鉴权与多租户隔离**
  - 目标：支持实际用户登录，隔离不同团队的数据。
  - 关键工作：接入 OAuth/Email 登录、为站点/扫描等表增加 `ownerId` 外键、更新 API 守卫逻辑。
  - 预期影响：从 Demo 形态迈向真实 SaaS，保障数据安全。

- **批量导入可视化结果**
  - 目标：在导入完成后展示详细成功/失败明细。
  - 关键工作：API 返回每个站点的处理状态，前端渲染表格并允许重试失败项。
  - 预期影响：提升运维录入效率，减少人工排查时间。

- **扫描任务队列化**
  - 目标：避免在 Web 请求内执行长耗时任务。
  - 关键工作：引入队列服务（如 BullMQ/Cloud Tasks），将 `scanSite` 提交后台处理并记录状态。
  - 预期影响：提升系统稳定性和横向扩展能力。

## 阶段 2：监控能力增强

- [x] **差异报告与比对 UI**
  - 目标：对比两次扫描的 URL 列表，突出新增、删除、修改。
  - 实现：站点详情页新增差异面板，基于 `scanId` 聚合差异，支持选择扫描记录。
- [x] **多渠道告警**
  - 目标：支持邮件、Slack/Teams、Webhook 自定义推送。
  - 实现：新增通知渠道表与管理 UI，`notifyChange` 在所有渠道完成真实投递（Webhook/HMAC、SMTP 邮件、Slack Webhook）。
- [x] **扫描调度策略**
  - 目标：根据站点重要性与历史变更频次，动态确定扫描频率。
  - 实现：站点支持优先级与扫描间隔配置，`cronScan` 根据外部 Cron 触发结果决定是否入队执行。

## 阶段 3：分析与运营工具

- [x] **趋势分析仪表盘**
  - 已上线 `/dashboard` 变更趋势图，汇总最近 30 天新增/删除/更新。
- [x] **标签与分组管理**
  - 提供 `/sites/groups` 与 `/sites/bulk` 页面，可新增分组、批量调整标签与分组。
- [x] **变更记录查看**
  - 变更记录支持来源字段并在站点详情、任务监控页提供只读列表。

## 阶段 4：生态与扩展

- **第三方平台集成**
  - 目标：与 Search Console、Analytics 等平台互通，补充更多指标。
  - 关键工作：搭建连接器、统一凭证管理、定时同步外部数据。
  - 预期影响：形成 SEO 数据中台，提供更完整的洞察。

- **自定义扫描器插件体系**
  - 目标：允许用户编写插件扩展扫描逻辑（如特定站点的验证码处理）。
  - 关键工作：定义插件接口、隔离运行环境、提供调试工具。
  - 预期影响：增强系统适配能力，满足复杂场景。

- **可观察性建设**
  - 目标：完善日志、指标、链路追踪，支持快速故障排查。
  - 关键工作：建立告警阈值、提供运营大屏。
  - 预期影响：保障平台在规模化后的稳定运行。

建议每个阶段结束后进行回顾，评估实现难度与业务价值，再决定下一步优先级，确保迭代与团队资源匹配。
